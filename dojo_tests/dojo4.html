<html xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office" >
<head>
<title>Testing animation</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">
	@import "../../../dojo/resources/dojo.css";
	@import "../../../dijit/tests/css/dijitTests.css";
</style>
<script type="text/javascript" src="dojo-1.3.1/dojo/dojo.js" djConfig="isDebug: true"></script>
<!-- Load static sentences -->
<script type="text/javascript" src="http://omnib.in/hthas/sentences.js"></script>

<script type="text/javascript">
dojo.require("dojox.gfx");
dojo.require("dojox.gfx.fx");
dojo.require("dojo.colors");

function getBrowserWindowSize()
{
var myWidth = 0, myHeight = 0;
if( typeof( window.innerWidth ) == 'number' )
{
//IE requires more code doncha know
myWidth = window.innerWidth;
myHeight = window.innerHeight;
}

return {width:myWidth, height:myHeight};
}

var browserWindowSize = getBrowserWindowSize();

var rect, text;

var makeShapes = function(){
	surface = dojox.gfx.createSurface("test", window.innerWidth-40, window.innerHeight);
	rect = surface.createRect({x: 20, y:-10, width: window.innerWidth-40, height: window.innerHeight}).
		setFill("green").setStroke({
			color: "black",
			width: 5,
			join: "round"
		});
};

var sentenceProto = function(){
	this.id = 0;
	this.text="The default text";
	
	this.posStart = {
		x: window.innerWidth-150, y:window.innerHeight-150
	}
	this.posMid = {
		x: 300, y: 650
	}
	this.posEnd = {
		x: 300, y: 400
	}
	this.loadSentence = function(){
		this.surfaceElement = surface.createText({x: this.posStart.x, y: this.posStart.y, text: this.text, align: "right"})
	 		.setFill("black").setFont({family: "serif", size: "10pt"});
	}
	
}

dojo.addOnLoad(makeShapes);

var sentence1 = new sentenceProto();
sentence1.text = sentences[0].sentence;
sentence1.id = 1;

                  

var animateStroke = function(){
	var anim = dojox.gfx.fx.animateStroke({
		duration:	5000,
		shape: 		rect,
		color:		{start: "white", end: "gray"},
		width:		{start: 5, end: 5},
		join:		{values: ["bevel", "round"]}
	});
	dojo.byId("stroke").disabled = "disabled";
	dojo.connect(anim, "onEnd", function(){ dojo.byId("stroke").disabled = ""; });
	anim.play();
};

var animateFill = function(){
	var anim = dojox.gfx.fx.animateFill({
		duration:	5000,
		shape: 		rect,
		color:		{start: "yellow", end: "blue"}
	});
	dojo.byId("fill").disabled = "disabled";
	dojo.connect(anim, "onEnd", function(){ dojo.byId("fill").disabled = ""; });
	anim.play();
};

var animateFont = function(){
	var anim = dojox.gfx.fx.animateFont({
		duration:	5000,
		shape: 		text,
		variant:	{values: ["normal", "small-caps"]},
		size:		{start: 10, end: 50, units: "pt"}
	});
	dojo.byId("font").disabled = "disabled";
	dojo.connect(anim, "onEnd", function(){ dojo.byId("font").disabled = ""; });
	anim.play();
};

var animateTransform = function(){
	var anim = dojox.gfx.fx.animateTransform({
		duration:	5000,
		shape: 		text,
		transform:	[
			{name: "translate", start: [0, 0], end: [-400, 0]}
		]
	});
	dojo.byId("transform").disabled = "disabled";
	dojo.connect(anim, "onEnd", function(){ dojo.byId("transform").disabled = ""; });
	anim.play();
};
</script>

</head>
<body>
<p>
	<button id="sentence" onclick="sentence1.loadSentence();">Load Sentence</button>
	&nbsp;
	<button id="stroke" onclick="animateStroke();">Stroke</button>
	&nbsp;
	<button id="fill" onclick="animateFill();">Fill</button>
	&nbsp;
	<button id="font" onclick="animateFont();">Font</button>
	&nbsp;
	<button id="transform" onclick="animateTransform();">Transform</button>
</p>
<div id="test" style="width: window.innerWidth; height: window.innerHeight;"></div>
</body>
</html>
