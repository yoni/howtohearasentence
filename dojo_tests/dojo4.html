<html xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office" >
<head>
<title>Testing animation</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">
	@import "../../../dojo/resources/dojo.css";
	@import "../../../dijit/tests/css/dijitTests.css";
</style>
<script type="text/javascript" src="dojo-1.3.1/dojo/dojo.js" djConfig="isDebug: true"></script>
<!--
<script type="text/javascript" src="../_base.js"></script>
<script type="text/javascript" src="../shape.js"></script>
<script type="text/javascript" src="../path.js"></script>
<script type="text/javascript" src="../arc.js"></script>
<script type="text/javascript" src="../fx.js"></script>
-->
<!--<script type="text/javascript" src="../vml.js"></script>-->
<!--<script type="text/javascript" src="../svg.js"></script>-->
<!--<script type="text/javascript" src="../canvas.js"></script>-->
<!--<script type="text/javascript" src="../silverlight.js"></script>-->

<script type="text/javascript">
dojo.require("dojox.gfx");
dojo.require("dojox.gfx.fx");
dojo.require("dojo.colors");

var rect, text;

var makeShapes = function(){
	var surface = dojox.gfx.createSurface("test", 1000, 1000);
	rect = surface.createRect({x: 20, y: -420, width: 1200, height: 1100}).
		setFill("white").setStroke({
			color: "black",
			width: 5,
			join: "round"
		});
	text = surface.createText({x: 900, y: 650, text: "how to hear a sentence", align: "right"})
		.setFill("black").setFont({family: "serif", size: "10pt"});
};

dojo.addOnLoad(makeShapes);

var animateStroke = function(){
	var anim = dojox.gfx.fx.animateStroke({
		duration:	5000,
		shape: 		rect,
		color:		{start: "white", end: "gray"},
		width:		{start: 5, end: 5},
		join:		{values: ["bevel", "round"]}
	});
	dojo.byId("stroke").disabled = "disabled";
	dojo.connect(anim, "onEnd", function(){ dojo.byId("stroke").disabled = ""; });
	anim.play();
};

var animateFill = function(){
	var anim = dojox.gfx.fx.animateFill({
		duration:	5000,
		shape: 		rect,
		color:		{start: "yellow", end: "blue"}
	});
	dojo.byId("fill").disabled = "disabled";
	dojo.connect(anim, "onEnd", function(){ dojo.byId("fill").disabled = ""; });
	anim.play();
};

var animateFont = function(){
	var anim = dojox.gfx.fx.animateFont({
		duration:	5000,
		shape: 		text,
		variant:	{values: ["normal", "small-caps"]},
		size:		{start: 10, end: 50, units: "pt"}
	});
	dojo.byId("font").disabled = "disabled";
	dojo.connect(anim, "onEnd", function(){ dojo.byId("font").disabled = ""; });
	anim.play();
};

var animateTransform = function(){
	var anim = dojox.gfx.fx.animateTransform({
		duration:	5000,
		shape: 		text,
		transform:	[
			{name: "translate", start: [0, 0], end: [-400, 0]}
		]
	});
	dojo.byId("transform").disabled = "disabled";
	dojo.connect(anim, "onEnd", function(){ dojo.byId("transform").disabled = ""; });
	anim.play();
};
</script>

</head>
<body>
<p>
	<button id="stroke" onclick="animateStroke();">Stroke</button>
	&nbsp;
	<button id="fill" onclick="animateFill();">Fill</button>
	&nbsp;
	<button id="font" onclick="animateFont();">Font</button>
	&nbsp;
	<button id="transform" onclick="animateTransform();">Transform</button>
</p>
<div id="test" style="width: 1200px; height: 1200px;"></div>
</body>
</html>
