<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>how to hear a sentence</title>
<meta http-equiv="imagetoolbar" content="no">

<style type="text/css">
	html {
		overflow: hidden;
	}
	body {
		margin: 0px;
		padding: 0px;
		background-image: url("images/paper.jpg");
		background-repeat: no-repeat; 		
		position: fixed;
		background-position: 50% 0%;
		background-color: #FDFDF0;
		width: 100%;
		height: 100%;
	}
	span{
		position: absolute;
		font-family: tahoma,verdana,serif;
		width: 25%;
	}
   
</style>
<script type="text/Javascript" src="content.js"></script>
<script type="text/javascript">

//This array will hold all of our Sentence objects
var Sentences = [];
var Inferences = [10];
var index = 0;
var normalCss = {'color':'#000',
				'fontSize':'16pt',
				'position':'fixed'};
var boldCss = {'color':'#000',
				'fontSize':'12pt',
				'position':'fixed'};
var inferenceCss = {'color':'#000',
				'fontSize':'13pt',
				'position':'fixed',
				'width': '50%'};

//The Sentence Class, i.e. a recipe for making a Sentence,
//plus some methods for activating and moving a Sentence
function Sentence(dx, dy, css, htmlArray, 
		x_max, y_max, x_orig, y_orig, type){
	//set the member values, according to the constructor parameters
	this.dx = dx;
	this.dy = dy;
	this.x = x_orig;
	this.y = y_orig;
	this.x_max = x_max;
	this.y_max = y_max;
	this.active = false;
	this.type = type;
	this.htmlArray = htmlArray;
	
	this.arrived = false;

	//Add an HTML tag with the sentence text in it
	this.sentenceText = document.createElement("span");
	this.sentenceText.innerHTML = htmlArray[2];
	
	//Set the css values for the sentence text
	for(var i in css) this.sentenceText.style[i] = css[i];

	this.sentenceText.style.display = 'none';

	if(this.type=='sentence'){
		this.sentenceText.style.bottom = y_orig+'px';
		this.sentenceText.style.left = x_orig+'px';
	}
	if(this.type=='inference'){
		this.sentenceText.style.top = y_orig+'px';
		this.sentenceText.style.left = x_orig+'px';
	}			
	//Add this HTML tag+text to the document
	document.body.appendChild(this.sentenceText);

	this.appear = function () {
		this.sentenceText.style.display = 'inline';
	}	
	this.highlight = function () {
		var index = this.htmlArray[0];
		var numHighlights = this.htmlArray[1];
		if(index<numHighlights-1){
			index++;
			this.htmlArray[0]=index;
			this.sentenceText.innerHTML = this.htmlArray[index+2];
		}
	}
	this.activate = function () {
		this.appear();
		this.active = true;
	}
	
	//Active Sentences will move according to their dx and dy parameters
	this.mov = function () {
		if(this.active && this.arrived==false){
			with(this) {
				if(dy!=0 && y!=y_max){
					y += dy;
					sentenceText.style.bottom = y+'px';
				}
				if(dx!=0 && x!=x_max){
					x += dx;
					sentenceText.style.left = x+'px';
				}else if(x==x_max){
					this.arrived = true;
					this.sentenceText.style.fontSize = '10pt';
				}
			}
		}
	}
}

function queueNextSentence(){
	if(index < Sentences.length){
		Sentences[index].activate();
		index++;
	}
}

function highlightPairs(){
	for(var i in Pairs){
		var first = Pairs[i][0];
		var sec = Pairs[i][1];
		var inferenceId = Pairs[i][2];
		if(Pairs[i][3]==false){
			if(Sentences[first].arrived && Sentences[sec].arrived){
				Sentences[first].highlight();
				Sentences[sec].highlight();
				if(inferenceId!=0){
					Inferences[inferenceId].appear();
				}
				Pairs[i][3]=true;
			}
		}
	}
}

function run(){
	for(var i in Sentences){
		Sentences[i].mov();
	}
	highlightPairs();
	setTimeout("run();", 32);
}

function initializeInferences(){
	Inferences.push(new Sentence(
			0,0,
			inferenceCss,
			INF[0],
			0, 0,
			500, 10,
			'inference'
	));
	Inferences.push(new Sentence(
			0,0,
			inferenceCss,
			INF[1],
			0, 0,
			500, 30,
			'inference'
	));
	Inferences.push(new Sentence(
			0,0,
			inferenceCss,
			INF[2],
			0, 0,
			500, 50,
			'inference'
	));
	Inferences.push(new Sentence(
			0,0,
			inferenceCss,
			INF[3],
			0, 0,
			500, 70,
			'inference'
	));
	Inferences.push(new Sentence(
			0,0,
			inferenceCss,
			INF[4],
			0, 0,
			500, 110,
			'inference'
	));
	Inferences.push(new Sentence(
			0,0,
			inferenceCss,
			INF[5],
			0, 0,
			500, 130,
			'inference'
	));
	Inferences.push(new Sentence(
			0,0,
			inferenceCss,
			INF[6],
			0, 0,
			500, 150,
			'inference'
	));
	Inferences.push(new Sentence(
			0,0,
			inferenceCss,
			INF[7],
			0, 0,
			500, 170,
			'inference'
	));
	Inferences.push(new Sentence(
			0,0,
			inferenceCss,
			INF[8],
			0, 0,
			500, 190,
			'inference'
	));
	Inferences.push(new Sentence(
			0,0,
			inferenceCss,
			INF[9],
			0, 0,
			500, 210,
			'inference'
	));
	Inferences.push(new Sentence(
			0,0,
			inferenceCss,
			INF[10],
			0, 0,
			500, 230,
			'inference'
	));
	Inferences.push(new Sentence(
			0,0,
			inferenceCss,
			INF[11],
			0, 0,
			500, 250,
			'inference'
	));
}
function initializeSentences(){
	Sentences.push(new Sentence(
		-1,0,
		normalCss,
		SENTENCES[0],
		350, 0,
		1400,550,
		'sentence'
	));
	Sentences.push(new Sentence(
			1,0,
			normalCss,
			SENTENCES[1],
			1020, 50,
			0,50,
			'sentence'
	));
	Sentences.push(new Sentence(
		-1,0,
		normalCss,
		SENTENCES[2],
		950, 100,
		1400, 250,
		'sentence'
	));
	Sentences.push(new Sentence(
			1,0,
			normalCss,
			SENTENCES[3],
			100, 150,
			0,436,
			'sentence'
	));
	Sentences.push(new Sentence(
			-1,0,
			normalCss,
			SENTENCES[4],
			1000, 0,
			1400,550,
			'sentence'
		));
		Sentences.push(new Sentence(
				1,0,
				normalCss,
				SENTENCES[5],
				980, 50,
				0,430,
				'sentence'
		));
		Sentences.push(new Sentence(
			-1,0,
			normalCss,
			SENTENCES[6],
			375, 100,
			1400, 100,
			'sentence'
		));
		Sentences.push(new Sentence(
				1,0,
				normalCss,
				SENTENCES[7],
				700, 150,
				0,280,
				'sentence'
		));
		Sentences.push(new Sentence(
				-1,0,
				normalCss,
				SENTENCES[8],
				1000, 0,
				1400,520,
				'sentence'
			));
			Sentences.push(new Sentence(
					1,0,
					normalCss,
					SENTENCES[9],
					550, 50,
					0,375,
					'sentence'
			));
			Sentences.push(new Sentence(
					-1,0,
					normalCss,
					SENTENCES[10],
					900, 0,
					1400,130,
					'sentence'
				));
				Sentences.push(new Sentence(
						1,0,
						normalCss,
						SENTENCES[11],
						100, 50,
						0,320,
						'sentence'
				));
				Sentences.push(new Sentence(
					-1,0,
					normalCss,
					SENTENCES[12],
					350, 100,
					1400, 190,
					'sentence'
				));
				Sentences.push(new Sentence(
						1,0,
						normalCss,
						SENTENCES[13],
						625, 150,
						0,360,
						'sentence'
				));
				Sentences.push(new Sentence(
						-1,0,
						normalCss,
						SENTENCES[14],
						710, 0,
						1400,250,
						'sentence'
					));
				Sentences.push(new Sentence(
						1,0,
						normalCss,
						SENTENCES[15],
						160, 50,
						0,380,
						'sentence'
				));
				Sentences.push(new Sentence(
					-1,0,
					normalCss,
					SENTENCES[16],
					960, 100,
					1400, 300,
					'sentence'
				));
				Sentences.push(new Sentence(
						1,0,
						normalCss,
						SENTENCES[17],
						680, 150,
						0,280,
						'sentence'
				));
				Sentences.push(new Sentence(
						-1,0,
						normalCss,
						SENTENCES[18],
						230, 0,
						1400,200,
						'sentence'
					));
				Sentences.push(new Sentence(
						1,0,
						normalCss,
						SENTENCES[19],
						550, 50,
						0,400,
						'sentence'
				));
				Sentences.push(new Sentence(
						-1,0,
						normalCss,
						SENTENCES[20],
						950, 0,
						1400,265,
						'sentence'
					));
					Sentences.push(new Sentence(
							1,0,
							normalCss,
							SENTENCES[21],
							875, 50,
							0,540,
							'sentence'
					));
					Sentences.push(new Sentence(
						-1,0,
						normalCss,
						SENTENCES[22],
						950, 100,
						1400, 150,
						'sentence'
					));
					Sentences.push(new Sentence(
							1,0,
							normalCss,
							SENTENCES[23],
							700, 150,
							0,280,
							'sentence'
					));
					Sentences.push(new Sentence(
							-1,0,
							normalCss,
							SENTENCES[24],
							880, 0,
							1400,50,
							'sentence'
						));
				Sentences.push(new Sentence(
						1,0,
						normalCss,
						SENTENCES[25],
						450, 50,
						0,390,
						'sentence'
				));
				Sentences.push(new Sentence(
					-1,0,
					normalCss,
					SENTENCES[26],
					320, 100,
					1400, 480,
					'sentence'
				));
				Sentences.push(new Sentence(
						1,0,
						normalCss,
						SENTENCES[27],
						830, 150,
						0,350,
						'sentence'
				));
				Sentences.push(new Sentence(
						-1,0,
						normalCss,
						SENTENCES[28],
						280, 0,
						1400,250,
						'sentence'
					));
				Sentences.push(new Sentence(
						1,0,
						normalCss,
						SENTENCES[29],
						500, 50,
						0,50,
						'sentence'
				));
				Sentences.push(new Sentence(
						-1,0,
						normalCss,
						SENTENCES[30],
						940, 0,
						1400,350,
						'sentence'
					));
					Sentences.push(new Sentence(
							1,0,
							normalCss,
							SENTENCES[31],
							940, 50,
							0,250,
							'sentence'
					));
					Sentences.push(new Sentence(
						-1,0,
						normalCss,
						SENTENCES[32],
						750, 100,
						1400, 150,
						'sentence'
					));
					Sentences.push(new Sentence(
							1,0,
							normalCss,
							SENTENCES[33],
							900, 150,
							0,300,
							'sentence'
					));
					Sentences.push(new Sentence(
							-1,0,
							normalCss,
							SENTENCES[34],
							290, 0,
							1400,50,
							'sentence'
						));
					Sentences.push(new Sentence(
							1,0,
							normalCss,
							SENTENCES[35],
							410, 50,
							0,50,
							'sentence'
					));
					Sentences.push(new Sentence(
						-1,0,
						normalCss,
						SENTENCES[36],
						950, 100,
						1400, 150,
						'sentence'
					));
					Sentences.push(new Sentence(
							1,0,
							normalCss,
							SENTENCES[37],
							1060, 150,
							0,280,
							'sentence'
					));
					Sentences.push(new Sentence(
							-1,0,
							normalCss,
							SENTENCES[38],
							1100, 0,
							1400,490,
							'sentence'
						));
						Sentences.push(new Sentence(
								1,0,
								normalCss,
								SENTENCES[39],
								370, 50,
								0,450,
								'sentence'
						));
						Sentences.push(new Sentence(
								-1,0,
								normalCss,
								SENTENCES[40],
								650, 0,
								1400,475,
								'sentence'
							));
					Sentences.push(new Sentence(
							1,0,
							normalCss,
							SENTENCES[41],
							300, 50,
							0,175,
							'sentence'
					));
					Sentences.push(new Sentence(
						-1,0,
						normalCss,
						SENTENCES[42],
						958, 100,
						1400, 200,
						'sentence'
					));
					Sentences.push(new Sentence(
							1,0,
							normalCss,
							SENTENCES[43],
							650, 150,
							0,280,
							'sentence'
					));
					Sentences.push(new Sentence(
							-1,0,
							normalCss,
							SENTENCES[44],
							900, 0,
							1400,50,
							'sentence'
						));
						Sentences.push(new Sentence(
								1,0,
								normalCss,
								SENTENCES[45],
								1070, 50,
								0,475,
								'sentence'
						));
						Sentences.push(new Sentence(
							-1,0,
							normalCss,
							SENTENCES[46],
							810, 100,
							1400, 150,
							'sentence'
						));
						Sentences.push(new Sentence(
								1,0,
								normalCss,
								SENTENCES[47],
								260, 150,
								0,280,
								'sentence'
						));
						Sentences.push(new Sentence(
								-1,0,
								normalCss,
								SENTENCES[48],
								350, 0,
								1400,50,
								'sentence'
							));
							Sentences.push(new Sentence(
									1,0,
									normalCss,
									SENTENCES[49],
									300, 50,
									0,20,
									'sentence'
							));
													
}




//Create the Sentence Objects
onload = function(){
	initializeInferences();
	initializeSentences();
	run();	
}


</script>
</head>

<body>
	<form>
		<input type="button" onclick="queueNextSentence()" value="sentence">
	</form>
</body>
</html>
